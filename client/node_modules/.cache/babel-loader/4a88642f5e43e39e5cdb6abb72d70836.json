{"ast":null,"code":"var _jsxFileName = \"/Users/michaelhudachek/Desktop/buglogger4/client/src/components/Edit-Ticket.js\";\nimport React, { Component } from 'react';\nimport { Button, Row, Col, Card, Form, Modal, Input } from 'reactstrap';\nimport Select from 'react-select';\nimport axios from 'axios';\nexport default class EditTicket extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      lightgray: \"#dddddd\",\n      midgray: \"#bbbbbb\",\n      darkgray: \"#555555\",\n      show: false,\n      constUsers: [],\n      assignedToId: {},\n      assignedToUsername: \"\",\n      status: \"\",\n      type: \"\",\n      description: \"\",\n      projectId: '',\n      ticketId: this.props.match.params.id,\n      statuses: [{\n        value: \"Open\",\n        label: \"Open\"\n      }, {\n        value: \"In Progress\",\n        label: \"In Progress\"\n      }, {\n        value: \"Closed\",\n        label: \"Closed\"\n      }],\n      types: [{\n        value: \"Aesthic\",\n        label: \"Aesthic\"\n      }, {\n        value: \"Bug\",\n        label: \"Bug\"\n      }, {\n        value: \"Feature\",\n        label: \"Feature\"\n      }]\n    };\n\n    this.handleShow = () => {\n      this.setState({\n        show: !this.state.show\n      });\n    };\n\n    this.handleDelete = () => {\n      const project = {\n        ticket: this.state.ticketId\n      };\n      axios.post('/api/projects/removeticket/' + this.state.projectId, project).then(response => {\n        axios.delete('/api/tickets/' + this.state.ticketId);\n      }).then(response => {\n        window.location = '/tickets';\n      });\n    };\n\n    this.onChangeDescription = e => {\n      this.setState({\n        description: e.target.value\n      });\n    };\n\n    this.handleChangeAssignedTo = changedVal => {\n      this.setState({\n        assignedToId: changedVal.value\n      });\n      this.setState({\n        assignedToUsername: changedVal.label\n      });\n    };\n\n    this.handleChangeStatus = changedVal => {\n      this.setState({\n        status: changedVal.value\n      });\n    };\n\n    this.handleChangeType = changedVal => {\n      this.setState({\n        type: changedVal.value\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      var ticket = {\n        description: this.state.description,\n        status: this.state.status,\n        type: this.state.type,\n        assignedToId: this.state.assignedToId,\n        assignedToUsername: this.state.assignedToUsername\n      };\n      axios.post('/api/tickets/update/' + this.state.ticketId, ticket).then(res => window.location = '/tickets/details/' + this.state.ticketId);\n    };\n  }\n\n  componentDidMount() {\n    //get ticket info\n    axios.get('/api/tickets/' + this.props.match.params.id).then(response => {\n      this.setState({\n        status: response.data.status\n      });\n      this.setState({\n        assignedToId: response.data.assignedToId\n      });\n      this.setState({\n        assignedToUsername: response.data.assignedToUsername\n      });\n      this.setState({\n        type: response.data.type\n      });\n      this.setState({\n        description: response.data.description\n      });\n      this.setState({\n        projectId: response.data.project\n      }); //get users for drop down selection\n\n      axios.get('/api/projects/getusers/' + response.data.project).then(response => {\n        axios.get('/api/users/searchid', {\n          params: {\n            ids: response.data\n          }\n        }).then(response => {\n          var newUsers = [];\n          response.data.map(currentuser => {\n            newUsers.push({\n              value: currentuser._id,\n              label: currentuser.username\n            });\n          });\n          this.setState({\n            constUsers: newUsers\n          });\n        });\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(Col, {\n      sm: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }), React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(Card, {\n      style: {\n        background: 'linear-gradient(to right bottom, #888888, #cccccc)',\n        border: 0,\n        padding: 15\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(Form, {\n      onSubmit: this.handleSubmit.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      style: {\n        color: 'white'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"Edit Ticket\"), React.createElement(\"div\", {\n      style: {\n        color: 'white'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"/tickets/details/\" + this.props.match.params.id,\n      style: {\n        cursor: 'pointer'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, \"Cancel\"), \" | \", React.createElement(\"a\", {\n      href: \"#\",\n      onClick: this.handleShow(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, \"Delete\")), React.createElement(\"div\", {\n      style: {\n        paddingTop: 20,\n        color: 'white'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"Description\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(Input, {\n      type: \"text\",\n      value: this.state.description,\n      onChange: this.onChangeDescription.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    })), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      style: {\n        paddingTop: 20,\n        color: 'white'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"Assigned To\"), React.createElement(Select, {\n      options: this.state.constUsers,\n      value: {\n        value: this.state.assignedToId,\n        label: this.state.assignedToUsername\n      },\n      onChange: this.handleChangeAssignedTo.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }), React.createElement(\"h5\", {\n      style: {\n        paddingTop: 20,\n        color: 'white'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, \"Status\"), React.createElement(Select, {\n      options: this.state.statuses,\n      value: {\n        value: this.state.status,\n        label: this.state.status\n      },\n      onChange: this.handleChangeStatus.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    })), React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      style: {\n        paddingTop: 20,\n        color: 'white'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"Type\"), React.createElement(Select, {\n      options: this.state.types,\n      value: {\n        value: this.state.type,\n        label: this.state.type\n      },\n      onChange: this.handleChangeType.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      style: {\n        paddingTop: 20\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"primary\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, \"Submit\"))))), React.createElement(Col, {\n      sm: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    })), React.createElement(Modal, {\n      show: this.state.show,\n      onHide: this.handleShow(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(Modal.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, \"Are you sure you want to delete this ticket?\"), React.createElement(Modal.Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"secondary\",\n      onClick: this.handleShow(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, \"Cancel\"), React.createElement(Button, {\n      variant: \"danger\",\n      onClick: this.handleDelete(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, \"Delete\"))));\n  }\n\n}","map":{"version":3,"sources":["/Users/michaelhudachek/Desktop/buglogger4/client/src/components/Edit-Ticket.js"],"names":["React","Component","Button","Row","Col","Card","Form","Modal","Input","Select","axios","EditTicket","state","lightgray","midgray","darkgray","show","constUsers","assignedToId","assignedToUsername","status","type","description","projectId","ticketId","props","match","params","id","statuses","value","label","types","handleShow","setState","handleDelete","project","ticket","post","then","response","delete","window","location","onChangeDescription","e","target","handleChangeAssignedTo","changedVal","handleChangeStatus","handleChangeType","handleSubmit","preventDefault","res","componentDidMount","get","data","ids","newUsers","map","currentuser","push","_id","username","catch","error","console","log","render","background","border","padding","bind","color","cursor","paddingTop"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Button, Row, Col, Card, Form, Modal, Input } from 'reactstrap';\nimport Select from 'react-select';\nimport axios from 'axios';\n\nexport default class EditTicket extends Component {\n  state = {\n      lightgray: \"#dddddd\",\n      midgray: \"#bbbbbb\",\n      darkgray: \"#555555\",\n      show: false,\n      constUsers: [],\n      assignedToId: {},\n      assignedToUsername: \"\",\n      status: \"\",\n      type: \"\",\n      description: \"\",\n      projectId: '',\n      ticketId: this.props.match.params.id,\n      statuses: [{ value: \"Open\" , label: \"Open\"},\n                 { value: \"In Progress\" , label: \"In Progress\"},\n                 { value: \"Closed\" , label: \"Closed\"}],\n      types: [{ value: \"Aesthic\" , label: \"Aesthic\"},\n                 { value: \"Bug\" , label: \"Bug\"},\n                 { value: \"Feature\" , label: \"Feature\"}],\n  }\n  \n  componentDidMount() {\n    //get ticket info\n    axios.get('/api/tickets/'+this.props.match.params.id)\n    .then(response => {\n      this.setState({status: response.data.status})\n      this.setState({assignedToId: response.data.assignedToId})\n      this.setState({assignedToUsername: response.data.assignedToUsername})\n      this.setState({type: response.data.type})\n      this.setState({description: response.data.description})\n      this.setState({projectId: response.data.project})\n\n      //get users for drop down selection\n      axios.get('/api/projects/getusers/'+response.data.project)\n      .then(response => {\n        axios.get('/api/users/searchid',{params: {ids: response.data}} )\n        .then(response => {\n          var newUsers = []\n          response.data.map(currentuser => {\n            newUsers.push({ value: currentuser._id , label: currentuser.username})\n          })\n          this.setState({constUsers: newUsers})\n        })\n      })\n    })\n    .catch(function (error) {\n      console.log(error);\n    })\n  }\n\n  handleShow = () => {\n    this.setState({show: !this.state.show})\n  }\n\n  //delete ticket, remove ticket from project, remove tickets from userId\n  handleDelete = () => {\n    const project = {ticket: this.state.ticketId}\n    axios.post('/api/projects/removeticket/'+this.state.projectId, project)\n    .then(response => {\n      axios.delete('/api/tickets/'+this.state.ticketId)\n    })\n    .then(response => {\n      window.location = '/tickets'\n    })\n  }\n\n  onChangeDescription = (e) => {\n    this.setState({description: e.target.value})\n  }\n\n  handleChangeAssignedTo = (changedVal) => {\n    this.setState({assignedToId: changedVal.value})\n    this.setState({assignedToUsername: changedVal.label})\n  }\n\n  handleChangeStatus = (changedVal) => {\n    this.setState({status: changedVal.value})\n  }\n\n  handleChangeType = (changedVal) => {\n    this.setState({type: changedVal.value})\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    var ticket = {\n      description: this.state.description,\n      status: this.state.status,\n      type: this.state.type,\n      assignedToId: this.state.assignedToId,\n      assignedToUsername: this.state.assignedToUsername,\n    }\n\n    axios.post('/api/tickets/update/'+this.state.ticketId, ticket)\n    .then(res => window.location = '/tickets/details/'+this.state.ticketId);\n  }\n\n  render() {\n    return (\n      <div>\n        <Row>\n        <Col sm={3}></Col>\n        <Col>\n        <Card style={{background: 'linear-gradient(to right bottom, #888888, #cccccc)', border: 0,padding: 15}}>\n        <Form onSubmit={this.handleSubmit.bind(this)}>\n          <h3 style={{color: 'white'}}>Edit Ticket</h3>\n          <div style={{color: 'white'}}><a href={\"/tickets/details/\"+this.props.match.params.id} style={{cursor: 'pointer'}}>Cancel</a> | <a href={\"#\"} onClick={this.handleShow(this)}>Delete</a></div>\n            <div style={{paddingTop:20, color: 'white'}}><h5>Description</h5></div>\n            <div>\n              <Input type=\"text\" value={ this.state.description } onChange={this.onChangeDescription.bind(this)}/>\n            </div>\n            <Row>\n              <Col>\n                <h5 style={{paddingTop:20, color: 'white'}}>Assigned To</h5>\n                <Select options={this.state.constUsers} value={{ value: this.state.assignedToId, label: this.state.assignedToUsername }} onChange={this.handleChangeAssignedTo.bind(this)}/>\n                <h5 style={{paddingTop:20, color: 'white'}}>Status</h5>\n                <Select options={this.state.statuses} value={{ value: this.state.status, label: this.state.status }} onChange={this.handleChangeStatus.bind(this)}/>\n              </Col>\n              <Col>\n                <h5 style={{paddingTop:20, color: 'white'}}>Type</h5>\n                <Select options={this.state.types} value={{ value: this.state.type, label: this.state.type }} onChange={this.handleChangeType.bind(this)}/>\n              </Col>\n            </Row>\n          <div style={{paddingTop:20}}>\n          <Button variant=\"primary\" type=\"submit\">\n            Submit\n          </Button>\n          </div>\n        </Form>\n        </Card>\n        </Col>\n        <Col sm={3}></Col>\n\n        </Row>\n        <Modal show={this.state.show} onHide={this.handleShow(this)}>\n        <Modal.Body>Are you sure you want to delete this ticket?</Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={this.handleShow(this)}>\n            Cancel\n          </Button>\n          <Button variant=\"danger\" onClick={this.handleDelete(this)}>\n            Delete\n          </Button>\n        </Modal.Footer>\n      </Modal>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}
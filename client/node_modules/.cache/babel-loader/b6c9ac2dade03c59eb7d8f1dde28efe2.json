{"ast":null,"code":"import _slicedToArray from \"/Users/michaelhudachek/Desktop/buglogger4/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/michaelhudachek/Desktop/buglogger4/client/src/components/Create-Ticket.js\";\nimport React, { useState, useEffect, Fragment } from 'react';\nimport axios from 'axios';\nimport Select from 'react-select';\nimport { Row, Col, Form, Button, Card, Input } from 'reactstrap'; //import \"react-bootstrap-table-next/dist/react-bootstrap-table2.min.css\"\n//created as a functional component to test auth0 hook,\n\nexport default function CreateTicket() {\n  const _useState = useState(window.location.pathname.split('/')[3]),\n        _useState2 = _slicedToArray(_useState, 1),\n        projectId = _useState2[0];\n\n  const _useState3 = useState({}),\n        _useState4 = _slicedToArray(_useState3, 2),\n        assignedToId = _useState4[0],\n        setAssignedToId = _useState4[1];\n\n  const _useState5 = useState(\"\"),\n        _useState6 = _slicedToArray(_useState5, 2),\n        assignedToUsername = _useState6[0],\n        setAssignedToUsername = _useState6[1];\n\n  const _useState7 = useState([]),\n        _useState8 = _slicedToArray(_useState7, 2),\n        constUsers = _useState8[0],\n        setConstUsers = _useState8[1];\n\n  const _useState9 = useState(\"\"),\n        _useState10 = _slicedToArray(_useState9, 2),\n        description = _useState10[0],\n        setDescription = _useState10[1];\n\n  const _useState11 = useState(\"\"),\n        _useState12 = _slicedToArray(_useState11, 2),\n        projectTitle = _useState12[0],\n        setProjectTitle = _useState12[1];\n\n  const _useState13 = useState(\"\"),\n        _useState14 = _slicedToArray(_useState13, 2),\n        type = _useState14[0],\n        setType = _useState14[1];\n\n  const _useState15 = useState([{\n    value: \"Bug\",\n    label: \"Bug\"\n  }, {\n    value: \"Aesthic\",\n    label: \"Aesthic\"\n  }, {\n    value: \"Feature\",\n    label: \"Feature\"\n  }]),\n        _useState16 = _slicedToArray(_useState15, 1),\n        types = _useState16[0];\n\n  useEffect(() => {\n    axios.get('/api/projects/' + projectId).then(response => {\n      setProjectTitle(response.data.title);\n    }).catch(function (error) {\n      console.log(error);\n    }); //get users for drop down selection\n\n    axios.get('/api/projects/getusers/' + projectId).then(response => {\n      axios.get('/api/users/searchid', {\n        params: {\n          ids: response.data\n        }\n      }).then(response => {\n        const newUsers = [];\n        response.data.map(currentuser => {\n          return newUsers.push({\n            value: currentuser._id,\n            label: currentuser.username\n          });\n        });\n        setConstUsers(newUsers);\n      });\n    });\n  }, [projectId]);\n\n  const onChangeDescription = e => {\n    return setDescription(e.target.value);\n  };\n\n  const handleChangeUser = changedVal => {\n    setAssignedToId(changedVal.value);\n    setAssignedToUsername(changedVal.label);\n    return;\n  };\n\n  const handleChangeType = changedVal => {\n    return setType(changedVal.value);\n  };\n\n  const onSubmit = e => {\n    e.preventDefault();\n\n    if (assignedToUsername === \"\") {\n      return prompt(\"please select a user\");\n    }\n\n    var ticket = {\n      newId: {},\n      description: description,\n      type: type,\n      assignedToId: assignedToId,\n      assignedToUsername: assignedToUsername,\n      project: projectId,\n      projectTitle: projectTitle\n    };\n    console.log('adding ticket');\n    axios.post('/api/tickets/add', ticket).then(res => {\n      console.log('adding ticket to project');\n      axios.post('/api/projects/addticket/' + projectId, res.data);\n    }).then(res => {\n      return window.location = '/projects/details/' + projectId;\n    });\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(Col, {\n    sm: 3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }), React.createElement(Col, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(Card, {\n    style: {\n      background: 'linear-gradient(to right bottom, #888888, #cccccc)',\n      border: 0,\n      padding: 15\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    style: {\n      color: 'white'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, \"Add Ticket\"), React.createElement(Form, {\n    onSubmit: onSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    style: {\n      flexDirection: 'row'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    style: {\n      color: 'white'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, \"Description: \"), React.createElement(Input, {\n    type: \"text\",\n    required: true,\n    value: description,\n    onChange: onChangeDescription,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    style: {\n      color: 'white'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, \"Assign To: \"), React.createElement(Select, {\n    required: true,\n    options: constUsers,\n    onChange: handleChangeUser,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    style: {\n      color: 'white'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, \"Type: \"), React.createElement(Select, {\n    defaultValue: types[0],\n    options: types,\n    onChange: handleChangeType,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"form-group\",\n    style: {\n      paddingTop: 30\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(Button, {\n    type: \"submit\",\n    color: \"primary\",\n    style: {\n      fontWeight: 'bold'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, \"Submit Ticket\")))))), React.createElement(Col, {\n    sm: 3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  })));\n}","map":{"version":3,"sources":["/Users/michaelhudachek/Desktop/buglogger4/client/src/components/Create-Ticket.js"],"names":["React","useState","useEffect","Fragment","axios","Select","Row","Col","Form","Button","Card","Input","CreateTicket","window","location","pathname","split","projectId","assignedToId","setAssignedToId","assignedToUsername","setAssignedToUsername","constUsers","setConstUsers","description","setDescription","projectTitle","setProjectTitle","type","setType","value","label","types","get","then","response","data","title","catch","error","console","log","params","ids","newUsers","map","currentuser","push","_id","username","onChangeDescription","e","target","handleChangeUser","changedVal","handleChangeType","onSubmit","preventDefault","prompt","ticket","newId","project","post","res","background","border","padding","color","flexDirection","paddingTop","fontWeight"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, Fragment } from 'react';\nimport axios from 'axios';\nimport Select from 'react-select'\nimport { Row, Col, Form, Button, Card, Input } from 'reactstrap';\n//import \"react-bootstrap-table-next/dist/react-bootstrap-table2.min.css\"\n\n//created as a functional component to test auth0 hook,\nexport default function CreateTicket() {\n  const [projectId] = useState(window.location.pathname.split('/')[3]);\n  const [assignedToId, setAssignedToId] = useState({});\n  const [assignedToUsername, setAssignedToUsername] = useState(\"\");\n  const [constUsers, setConstUsers] = useState([]);\n  const [description, setDescription] = useState(\"\");\n  const [projectTitle, setProjectTitle] = useState(\"\");\n  const [type, setType] = useState(\"\");\n  const [types] = useState([{ value: \"Bug\" , label: \"Bug\"},\n                                      { value: \"Aesthic\" , label: \"Aesthic\"},\n                                      { value: \"Feature\" , label: \"Feature\"}]);\n\n  useEffect(() => {\n    axios.get('/api/projects/'+projectId)\n    .then(response => {\n      setProjectTitle(response.data.title)\n    })\n    .catch(function (error) {\n      console.log(error);\n    })\n\n    //get users for drop down selection\n    axios.get('/api/projects/getusers/'+projectId)\n    .then(response => {\n      axios.get('/api/users/searchid',{params: {ids: response.data}} )\n      .then(response => {\n        const newUsers = []\n        response.data.map(currentuser => {\n          return newUsers.push({ value: currentuser._id , label: currentuser.username})\n        })\n        setConstUsers(newUsers)\n      })\n    })\n    \n  }, [projectId]);\n\n  const onChangeDescription = (e) => {\n    return setDescription(e.target.value)\n  }\n\n  const handleChangeUser = (changedVal) => {\n    setAssignedToId(changedVal.value)\n    setAssignedToUsername(changedVal.label)\n    return\n  }\n\n  const handleChangeType = (changedVal) => {\n    return setType(changedVal.value)\n  }\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n\n    if(assignedToUsername === \"\"){\n      return prompt(\"please select a user\")\n    }\n\n    var ticket = {\n      newId: {},\n      description: description,\n      type: type,\n      assignedToId: assignedToId,\n      assignedToUsername: assignedToUsername,\n      project: projectId,\n      projectTitle: projectTitle,\n    }\n\n    console.log('adding ticket')\n    axios.post('/api/tickets/add',ticket)\n    .then(res => {\n      console.log('adding ticket to project')\n      axios.post('/api/projects/addticket/'+projectId, res.data)\n    })\n    .then(res => {\n      return window.location = '/projects/details/'+projectId\n    });\n  }\n\n  return (\n    <div>\n      <Row>\n        <Col sm={3}></Col>\n        <Col>\n        <Card style={{background: 'linear-gradient(to right bottom, #888888, #cccccc)', border: 0,padding: 15}}>\n        <h3 style={{color: 'white'}}>Add Ticket</h3>\n        <Form onSubmit={onSubmit}>\n          <div style={{flexDirection: 'row'}}>\n            <label style={{color: 'white'}}>Description: </label>\n              <Input \n                type=\"text\"\n                required\n                value={description}\n                onChange={onChangeDescription}\n              />\n            <label style={{color: 'white'}}>Assign To: </label>\n                <Select required options={constUsers} onChange={handleChangeUser}/>\n            <label style={{color: 'white'}}>Type: </label>\n              <Select defaultValue={types[0]} options={types} onChange={handleChangeType}/>\n            <div className=\"form-group\" style={{paddingTop:30}}>\n              <Button type=\"submit\" color='primary' style={{fontWeight: 'bold'}}>\n                Submit Ticket\n              </Button>\n            </div>\n          </div>  \n        </Form>\n        </Card>\n        </Col>\n        <Col sm={3}></Col>\n      </Row>\n    </div>\n  )\n}"]},"metadata":{},"sourceType":"module"}
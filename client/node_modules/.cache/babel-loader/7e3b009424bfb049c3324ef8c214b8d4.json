{"ast":null,"code":"import _slicedToArray from \"/Users/michaelhudachek/Desktop/buglogger4/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/michaelhudachek/Desktop/buglogger4/client/src/components/Create-Ticket.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Select from 'react-select';\nimport { Row, Col, Form, Button, Card } from 'reactstrap';\nimport \"react-bootstrap-table-next/dist/react-bootstrap-table2.min.css\"; //created as a functional component to test auth0 hook,\n\nexport default function CreateTicket() {\n  const projectId = window.location.pathname.split('/')[3];\n\n  const _useState = useState({}),\n        _useState2 = _slicedToArray(_useState, 2),\n        assignedToId = _useState2[0],\n        setAssignedToId = _useState2[1];\n\n  const _useState3 = useState(\"\"),\n        _useState4 = _slicedToArray(_useState3, 2),\n        assignedToUsername = _useState4[0],\n        setAssignedToUsername = _useState4[1];\n\n  const _useState5 = useState([]),\n        _useState6 = _slicedToArray(_useState5, 2),\n        constUsers = _useState6[0],\n        setConstUsers = _useState6[1];\n\n  const _useState7 = useState(\"\"),\n        _useState8 = _slicedToArray(_useState7, 2),\n        description = _useState8[0],\n        setDescription = _useState8[1];\n\n  const _useState9 = useState(\"\"),\n        _useState10 = _slicedToArray(_useState9, 2),\n        projectTitle = _useState10[0],\n        setProjectTitle = _useState10[1];\n\n  const _useState11 = useState(\"\"),\n        _useState12 = _slicedToArray(_useState11, 2),\n        type = _useState12[0],\n        setType = _useState12[1];\n\n  const _useState13 = useState([{\n    value: \"Bug\",\n    label: \"Bug\"\n  }, {\n    value: \"Aesthic\",\n    label: \"Aesthic\"\n  }, {\n    value: \"Feature\",\n    label: \"Feature\"\n  }]),\n        _useState14 = _slicedToArray(_useState13, 2),\n        types = _useState14[0],\n        setTypes = _useState14[1];\n\n  useEffect(() => {\n    axios.get('/api/projects/' + projectId).then(response => {\n      setProjectTitle(response.data.title);\n    }).catch(function (error) {\n      console.log(error);\n    }); //get users for drop down selection\n\n    axios.get('/api/projects/getusers/' + projectId).then(response => {\n      axios.get('/api/users/searchid', {\n        params: {\n          ids: response.data\n        }\n      }).then(response => {\n        const newUsers = [];\n        response.data.map(currentuser => {\n          newUsers.push({\n            value: currentuser._id,\n            label: currentuser.username\n          });\n        });\n        setConstUsers(newUsers);\n      });\n    });\n  }, []);\n\n  const onChangeDescription = e => {\n    setDescription(e.target.value);\n  };\n\n  const handleChangeUser = changedVal => {\n    setAssignedToId(changedVal.value);\n    setAssignedToUsername(changedVal.label);\n  };\n\n  const handleChangeType = changedVal => {\n    setType(changedVal.value);\n  };\n\n  const onSubmit = e => {\n    e.preventDefault();\n    var ticket = {\n      newId: {},\n      description: description,\n      type: type,\n      assignedToId: assignedToId,\n      assignedToUsername: assignedToUsername,\n      project: projectId,\n      projectTitle: projectTitle\n    };\n    console.log('adding ticket');\n    axios.post('/api/tickets/add', ticket).then(res => {\n      console.log('adding ticket to project');\n      axios.post('/api/projects/addticket/' + projectId, res.data);\n    }).then(res => {\n      window.location = '/projects/details/' + projectId;\n    });\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(Col, {\n    sm: 3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }), React.createElement(Col, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(Card, {\n    style: {\n      background: 'linear-gradient(to right bottom, #888888, #cccccc)',\n      border: 0,\n      padding: 15 //overflowY: \"scroll\"\n\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    style: {\n      color: 'white'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, \"Add Ticket\"), React.createElement(Form, {\n    onSubmit: onSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    style: {\n      flexDirection: 'row'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    style: {\n      color: 'white'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, \"Description: \"), React.createElement(Form.Control, {\n    type: \"text\",\n    required: true,\n    value: description,\n    onChange: onChangeDescription,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    style: {\n      color: 'white'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, \"Assign To: \"), React.createElement(Select, {\n    defaultValue: constUsers[0],\n    options: constUsers,\n    onChange: handleChangeUser,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    style: {\n      color: 'white'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, \"Type: \"), React.createElement(Select, {\n    options: types,\n    onChange: handleChangeType,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"form-group\",\n    style: {\n      paddingTop: 30\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(Button, {\n    type: \"submit\",\n    style: {\n      fontWeight: 'bold'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, \"Submit Ticket\")))))), React.createElement(Col, {\n    sm: 3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  })));\n}","map":{"version":3,"sources":["/Users/michaelhudachek/Desktop/buglogger4/client/src/components/Create-Ticket.js"],"names":["React","useState","useEffect","axios","Select","Row","Col","Form","Button","Card","CreateTicket","projectId","window","location","pathname","split","assignedToId","setAssignedToId","assignedToUsername","setAssignedToUsername","constUsers","setConstUsers","description","setDescription","projectTitle","setProjectTitle","type","setType","value","label","types","setTypes","get","then","response","data","title","catch","error","console","log","params","ids","newUsers","map","currentuser","push","_id","username","onChangeDescription","e","target","handleChangeUser","changedVal","handleChangeType","onSubmit","preventDefault","ticket","newId","project","post","res","background","border","padding","color","flexDirection","paddingTop","fontWeight"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Select from 'react-select'\nimport { Row, Col, Form, Button, Card } from 'reactstrap';\nimport \"react-bootstrap-table-next/dist/react-bootstrap-table2.min.css\"\n\n//created as a functional component to test auth0 hook,\nexport default function CreateTicket() {\n  const projectId = window.location.pathname.split('/')[3]\n\n  const [assignedToId, setAssignedToId] = useState({});\n  const [assignedToUsername, setAssignedToUsername] = useState(\"\");\n  const [constUsers, setConstUsers] = useState([]);\n  const [description, setDescription] = useState(\"\");\n  const [projectTitle, setProjectTitle] = useState(\"\");\n  const [type, setType] = useState(\"\");\n  const [types, setTypes] = useState([{ value: \"Bug\" , label: \"Bug\"},\n                                      { value: \"Aesthic\" , label: \"Aesthic\"},\n                                      { value: \"Feature\" , label: \"Feature\"}]);\n\n  useEffect(() => {\n    axios.get('/api/projects/'+projectId)\n    .then(response => {\n      setProjectTitle(response.data.title)\n    })\n    .catch(function (error) {\n      console.log(error);\n    })\n\n    //get users for drop down selection\n    axios.get('/api/projects/getusers/'+projectId)\n    .then(response => {\n      axios.get('/api/users/searchid',{params: {ids: response.data}} )\n      .then(response => {\n        const newUsers = []\n        response.data.map(currentuser => {\n          newUsers.push({ value: currentuser._id , label: currentuser.username})\n        })\n        setConstUsers(newUsers)\n      })\n    })\n    \n  }, []);\n\n  const onChangeDescription = (e) => {\n    setDescription(e.target.value)\n  }\n\n  const handleChangeUser = (changedVal) => {\n    setAssignedToId(changedVal.value)\n    setAssignedToUsername(changedVal.label)\n  }\n\n  const handleChangeType = (changedVal) => {\n    setType(changedVal.value)\n  }\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n\n    var ticket = {\n      newId: {},\n      description: description,\n      type: type,\n      assignedToId: assignedToId,\n      assignedToUsername: assignedToUsername,\n      project: projectId,\n      projectTitle: projectTitle,\n    }\n\n    console.log('adding ticket')\n    axios.post('/api/tickets/add',ticket)\n    .then(res => {\n      console.log('adding ticket to project')\n      axios.post('/api/projects/addticket/'+projectId, res.data)\n    })\n    .then(res => {\n      window.location = '/projects/details/'+projectId\n    });\n  }\n\n  return (\n    <div>\n      <Row>\n        <Col sm={3}></Col>\n        <Col>\n        <Card style={{\n          background: 'linear-gradient(to right bottom, #888888, #cccccc)', border: 0,padding: 15, //overflowY: \"scroll\"\n        }}>\n        <h3 style={{color: 'white'}}>Add Ticket</h3>\n        <Form onSubmit={onSubmit}>\n          <div style={{flexDirection: 'row'}}>\n            <label style={{color: 'white'}}>Description: </label>\n              <Form.Control \n                type=\"text\"\n                required\n                value={description}\n                onChange={onChangeDescription}\n              />\n            <label style={{color: 'white'}}>Assign To: </label>\n              <Select defaultValue={constUsers[0]} options={constUsers} onChange={handleChangeUser}/>\n            <label style={{color: 'white'}}>Type: </label>\n              <Select options={types} onChange={handleChangeType}/>\n            <div className=\"form-group\" style={{paddingTop:30}}>\n              <Button type=\"submit\" style={{fontWeight: 'bold'}}>\n                Submit Ticket\n              </Button>\n            </div>\n          </div>  \n        </Form>\n        </Card>\n        </Col>\n        <Col sm={3}></Col>\n      </Row>\n    </div>\n  )\n}"]},"metadata":{},"sourceType":"module"}
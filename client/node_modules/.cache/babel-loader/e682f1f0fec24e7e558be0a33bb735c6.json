{"ast":null,"code":"var _jsxFileName = \"/Users/michaelhudachek/Desktop/buglogger4/client/src/components/Edit-Ticket.js\";\nimport React, { Component } from 'react';\nimport { Button, Row, Col, Card, Form, Modal, Input } from 'reactstrap';\nimport Select from 'react-select';\nimport axios from 'axios';\nexport default class EditTicket extends Component {\n  constructor(props) {\n    super(props);\n    this.handleDelete = this.handleDelete.bind(this);\n    this.handleShow = this.handleShow.bind(this);\n    this.handleChangeAssignedTo = this.handleChangeAssignedTo.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChangeStatus = this.handleChangeStatus.bind(this);\n    this.handleChangeType = this.handleChangeType.bind(this);\n    this.onChangeDescription = this.onChangeDescription.bind(this);\n    this.state = {\n      lightgray: \"#dddddd\",\n      midgray: \"#bbbbbb\",\n      darkgray: \"#555555\",\n      constUsers: [],\n      assignedToId: {},\n      assignedToUsername: \"\",\n      status: \"\",\n      type: \"\",\n      description: \"\",\n      projectId: '',\n      ticketId: this.props.match.params.id,\n      statuses: [{\n        value: \"Open\",\n        label: \"Open\"\n      }, {\n        value: \"In Progress\",\n        label: \"In Progress\"\n      }, {\n        value: \"Closed\",\n        label: \"Closed\"\n      }],\n      types: [{\n        value: \"Aesthic\",\n        label: \"Aesthic\"\n      }, {\n        value: \"Bug\",\n        label: \"Bug\"\n      }, {\n        value: \"Feature\",\n        label: \"Feature\"\n      }]\n    };\n  }\n\n  componentDidMount() {\n    axios.get('/api/tickets/' + this.props.match.params.id).then(response => {\n      this.setState({\n        status: response.data.status\n      });\n      this.setState({\n        assignedToId: response.data.assignedToId\n      });\n      this.setState({\n        assignedToUsername: response.data.assignedToUsername\n      });\n      this.setState({\n        type: response.data.type\n      });\n      this.setState({\n        description: response.data.description\n      });\n      this.setState({\n        projectId: response.data.project\n      }); //get users for drop down selection\n\n      axios.get('/api/projects/getusers/' + response.data.project).then(response => {\n        axios.get('/api/users/searchid', {\n          params: {\n            ids: response.data\n          }\n        }).then(response => {\n          var newUsers = [];\n          response.data.map(currentuser => {\n            newUsers.push({\n              value: currentuser._id,\n              label: currentuser.username\n            });\n          });\n          this.setState({\n            constUsers: newUsers\n          });\n        });\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  handleShow() {\n    this.setState({\n      show: !this.state.show\n    });\n  } //delete ticket, remove ticket from project, remove tickets from userId\n\n\n  handleDelete() {\n    const project = {\n      ticket: this.state.ticketId\n    };\n    axios.post('/api/projects/removeticket/' + this.state.projectId, project).then(response => {\n      axios.delete('/api/tickets/' + this.state.ticketId);\n    }).then(response => {\n      window.location = '/tickets';\n    });\n  }\n\n  onChangeDescription(e) {\n    this.setState({\n      description: e.target.value\n    });\n  }\n\n  handleChangeAssignedTo(changedVal) {\n    this.setState({\n      assignedToId: changedVal.value\n    });\n    this.setState({\n      assignedToUsername: changedVal.label\n    });\n  }\n\n  handleChangeStatus(changedVal) {\n    this.setState({\n      status: changedVal.value\n    });\n  }\n\n  handleChangeType(changedVal) {\n    this.setState({\n      type: changedVal.value\n    });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    var ticket = {\n      description: this.state.description,\n      status: this.state.status,\n      type: this.state.type,\n      assignedToId: this.state.assignedToId,\n      assignedToUsername: this.state.assignedToUsername\n    };\n    console.log(ticket);\n    axios.post('/api/tickets/update/' + this.state.ticketId, ticket).then(res => window.location = '/tickets/details/' + this.state.ticketId);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(Col, {\n      sm: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }), React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(Card, {\n      style: {\n        background: 'linear-gradient(to right bottom, #888888, #cccccc)',\n        border: 0,\n        padding: 15\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(Form, {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      style: {\n        color: 'white'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, \"Edit Ticket\"), React.createElement(\"div\", {\n      style: {\n        color: 'white'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"/tickets/details/\" + this.props.match.params.id,\n      style: {\n        cursor: 'pointer'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"Cancel\"), \" | \", React.createElement(\"a\", {\n      href: \"#\",\n      onClick: this.handleShow,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"Delete\")), React.createElement(\"div\", {\n      style: {\n        paddingTop: 20,\n        color: 'white'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"Description\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(Input, {\n      type: \"text\",\n      value: this.state.description,\n      onChange: this.onChangeDescription,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    })), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      style: {\n        paddingTop: 20,\n        color: 'white'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"Assigned To\"), React.createElement(Select, {\n      options: this.state.constUsers,\n      value: {\n        value: this.state.assignedToId,\n        label: this.state.assignedToUsername\n      },\n      onChange: this.handleChangeAssignedTo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }), React.createElement(\"h5\", {\n      style: {\n        paddingTop: 20,\n        color: 'white'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, \"Status\"), React.createElement(Select, {\n      options: this.state.statuses,\n      value: {\n        value: this.state.status,\n        label: this.state.status\n      },\n      onChange: this.handleChangeStatus,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    })), React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      style: {\n        paddingTop: 20,\n        color: 'white'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \"Type\"), React.createElement(Form.Select, {\n      options: this.state.types,\n      value: {\n        value: this.state.type,\n        label: this.state.type\n      },\n      onChange: this.handleChangeType,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      style: {\n        paddingTop: 20\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"primary\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, \"Submit\"))))), React.createElement(Col, {\n      sm: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    })), React.createElement(Modal, {\n      show: this.state.show,\n      onHide: this.handleShow,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(Modal.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, \"Are you sure you want to delete this ticket?\"), React.createElement(Modal.Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"secondary\",\n      onClick: this.handleShow,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, \"Cancel\"), React.createElement(Button, {\n      variant: \"danger\",\n      onClick: this.handleDelete,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, \"Delete\"))));\n  }\n\n}","map":{"version":3,"sources":["/Users/michaelhudachek/Desktop/buglogger4/client/src/components/Edit-Ticket.js"],"names":["React","Component","Button","Row","Col","Card","Form","Modal","Input","Select","axios","EditTicket","constructor","props","handleDelete","bind","handleShow","handleChangeAssignedTo","handleSubmit","handleChangeStatus","handleChangeType","onChangeDescription","state","lightgray","midgray","darkgray","constUsers","assignedToId","assignedToUsername","status","type","description","projectId","ticketId","match","params","id","statuses","value","label","types","componentDidMount","get","then","response","setState","data","project","ids","newUsers","map","currentuser","push","_id","username","catch","error","console","log","show","ticket","post","delete","window","location","e","target","changedVal","preventDefault","res","render","background","border","padding","color","cursor","paddingTop"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Button, Row, Col, Card, Form, Modal, Input } from 'reactstrap';\nimport Select from 'react-select';\nimport axios from 'axios';\n\nexport default class EditTicket extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleDelete = this.handleDelete.bind(this)\n    this.handleShow = this.handleShow.bind(this)\n    this.handleChangeAssignedTo = this.handleChangeAssignedTo.bind(this)\n    this.handleSubmit = this.handleSubmit.bind(this)\n    this.handleChangeStatus = this.handleChangeStatus.bind(this)\n    this.handleChangeType = this.handleChangeType.bind(this)\n    this.onChangeDescription = this.onChangeDescription.bind(this)\n\n    this.state = {\n      lightgray: \"#dddddd\",\n      midgray: \"#bbbbbb\",\n      darkgray: \"#555555\",\n      constUsers: [],\n      assignedToId: {},\n      assignedToUsername: \"\",\n      status: \"\",\n      type: \"\",\n      description: \"\",\n      projectId: '',\n      ticketId: this.props.match.params.id,\n      statuses: [{ value: \"Open\" , label: \"Open\"},\n                 { value: \"In Progress\" , label: \"In Progress\"},\n                 { value: \"Closed\" , label: \"Closed\"}],\n      types: [{ value: \"Aesthic\" , label: \"Aesthic\"},\n                 { value: \"Bug\" , label: \"Bug\"},\n                 { value: \"Feature\" , label: \"Feature\"}],\n    } \n  }\n  \n  componentDidMount() {\n    axios.get('/api/tickets/'+this.props.match.params.id)\n    .then(response => {\n      this.setState({status: response.data.status})\n      this.setState({assignedToId: response.data.assignedToId})\n      this.setState({assignedToUsername: response.data.assignedToUsername})\n      this.setState({type: response.data.type})\n      this.setState({description: response.data.description})\n      this.setState({projectId: response.data.project})\n      //get users for drop down selection\n      axios.get('/api/projects/getusers/'+response.data.project)\n      .then(response => {\n        axios.get('/api/users/searchid',{params: {ids: response.data}} )\n        .then(response => {\n          var newUsers = []\n          response.data.map(currentuser => {\n            newUsers.push({ value: currentuser._id , label: currentuser.username})\n          })\n          this.setState({constUsers: newUsers})\n        })\n      })\n    })\n    .catch(function (error) {\n      console.log(error);\n    })\n  }\n\n  handleShow() {\n    this.setState({show: !this.state.show})\n  }\n\n  //delete ticket, remove ticket from project, remove tickets from userId\n  handleDelete() {\n    const project = {ticket: this.state.ticketId}\n    axios.post('/api/projects/removeticket/'+this.state.projectId, project)\n    .then(response => {\n      axios.delete('/api/tickets/'+this.state.ticketId)\n    })\n    .then(response => {\n      window.location = '/tickets'\n    })\n  }\n\n  onChangeDescription(e) {\n    this.setState({description: e.target.value})\n  }\n\n  handleChangeAssignedTo(changedVal){\n    this.setState({assignedToId: changedVal.value})\n    this.setState({assignedToUsername: changedVal.label})\n  }\n\n  handleChangeStatus(changedVal){\n    this.setState({status: changedVal.value})\n  }\n\n  handleChangeType(changedVal){\n    this.setState({type: changedVal.value})\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    var ticket = {\n      description: this.state.description,\n      status: this.state.status,\n      type: this.state.type,\n      assignedToId: this.state.assignedToId,\n      assignedToUsername: this.state.assignedToUsername,\n    }\n\n    console.log(ticket)\n    axios.post('/api/tickets/update/'+this.state.ticketId, ticket)\n    .then(res => window.location = '/tickets/details/'+this.state.ticketId);\n  }\n\n  render() {\n    return (\n      <div>\n        <Row>\n        <Col sm={3}></Col>\n        <Col>\n        <Card style={{background: 'linear-gradient(to right bottom, #888888, #cccccc)', border: 0,padding: 15}}>\n        <Form onSubmit={this.handleSubmit}>\n          <h3 style={{color: 'white'}}>Edit Ticket</h3>\n          <div style={{color: 'white'}}><a href={\"/tickets/details/\"+this.props.match.params.id} style={{cursor: 'pointer'}}>Cancel</a> | <a href={\"#\"} onClick={this.handleShow}>Delete</a></div>\n            <div style={{paddingTop:20, color: 'white'}}><h5>Description</h5></div>\n            <div><Input type=\"text\" value={ this.state.description } onChange={this.onChangeDescription}/></div>\n          <Row>\n            <Col>\n              <h5 style={{paddingTop:20, color: 'white'}}>Assigned To</h5>\n              <Select options={this.state.constUsers} value={{ value: this.state.assignedToId, label: this.state.assignedToUsername }} onChange={this.handleChangeAssignedTo}/>\n              <h5 style={{paddingTop:20, color: 'white'}}>Status</h5>\n              <Select options={this.state.statuses} value={{ value: this.state.status, label: this.state.status }} onChange={this.handleChangeStatus}/>\n            </Col>\n            <Col>\n              <h5 style={{paddingTop:20, color: 'white'}}>Type</h5>\n              <Form.Select options={this.state.types} value={{ value: this.state.type, label: this.state.type }} onChange={this.handleChangeType}/>\n            </Col>\n          </Row>\n          <div style={{paddingTop:20}}>\n          <Button variant=\"primary\" type=\"submit\">\n            Submit\n          </Button>\n          </div>\n        </Form>\n        </Card>\n        </Col>\n        <Col sm={3}></Col>\n\n        </Row>\n        <Modal show={this.state.show} onHide={this.handleShow}>\n        <Modal.Body>Are you sure you want to delete this ticket?</Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={this.handleShow}>\n            Cancel\n          </Button>\n          <Button variant=\"danger\" onClick={this.handleDelete}>\n            Delete\n          </Button>\n        </Modal.Footer>\n      </Modal>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/Users/michaelhudachek/Desktop/buglogger4/client/src/components/Edit-Ticket.js\";\nimport React, { Component } from 'react';\nimport { Button, Row, Col, Card, Form, Input, Modal, ModalBody, ModalFooter } from 'reactstrap';\nimport Select from 'react-select';\nimport axios from 'axios';\nexport default class EditTicket extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      show: false,\n      constUsers: [],\n      assignedToId: {},\n      assignedToUsername: \"\",\n      status: \"\",\n      type: \"\",\n      description: \"\",\n      projectId: '',\n      ticketId: this.props.match.params.id,\n      statuses: [{\n        value: \"Open\",\n        label: \"Open\"\n      }, {\n        value: \"In Progress\",\n        label: \"In Progress\"\n      }, {\n        value: \"Closed\",\n        label: \"Closed\"\n      }],\n      types: [{\n        value: \"Aesthic\",\n        label: \"Aesthic\"\n      }, {\n        value: \"Bug\",\n        label: \"Bug\"\n      }, {\n        value: \"Feature\",\n        label: \"Feature\"\n      }]\n    };\n\n    this.handleShow = () => {\n      console.log('handle show');\n      this.setState({\n        show: !this.state.show\n      });\n    };\n\n    this.handleDelete = () => {\n      const project = {\n        ticket: this.state.ticketId\n      };\n      axios.post('/api/projects/removeticket/' + this.state.projectId, project).then(response => {\n        axios.delete('/api/tickets/' + this.state.ticketId);\n      }).then(response => {\n        window.location = '/tickets';\n      });\n    };\n\n    this.onChangeDescription = e => {\n      this.setState({\n        description: e.target.value\n      });\n    };\n\n    this.handleChangeAssignedTo = changedVal => {\n      this.setState({\n        assignedToId: changedVal.value\n      });\n      this.setState({\n        assignedToUsername: changedVal.label\n      });\n    };\n\n    this.handleChangeStatus = changedVal => {\n      this.setState({\n        status: changedVal.value\n      });\n    };\n\n    this.handleChangeType = changedVal => {\n      this.setState({\n        type: changedVal.value\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      var ticket = {\n        description: this.state.description,\n        status: this.state.status,\n        type: this.state.type,\n        assignedToId: this.state.assignedToId,\n        assignedToUsername: this.state.assignedToUsername\n      };\n      axios.post('/api/tickets/update/' + this.state.ticketId, ticket).then(res => window.location = '/tickets/details/' + this.state.ticketId);\n    };\n  }\n\n  componentDidMount() {\n    //get ticket info\n    axios.get('/api/tickets/' + this.props.match.params.id).then(response => {\n      this.setState({\n        status: response.data.status\n      });\n      this.setState({\n        assignedToId: response.data.assignedToId\n      });\n      this.setState({\n        assignedToUsername: response.data.assignedToUsername\n      });\n      this.setState({\n        type: response.data.type\n      });\n      this.setState({\n        description: response.data.description\n      });\n      this.setState({\n        projectId: response.data.project\n      }); //get users for drop down selection\n\n      axios.get('/api/projects/getusers/' + response.data.project).then(response => {\n        axios.get('/api/users/searchid', {\n          params: {\n            ids: response.data\n          }\n        }).then(response => {\n          var newUsers = [];\n          response.data.map(currentuser => {\n            newUsers.push({\n              value: currentuser._id,\n              label: currentuser.username\n            });\n          });\n          this.setState({\n            constUsers: newUsers\n          });\n        });\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(Col, {\n      sm: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }), React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(Card, {\n      style: {\n        background: 'linear-gradient(to right bottom, #888888, #cccccc)',\n        border: 0,\n        padding: 15\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(Form, {\n      onSubmit: this.handleSubmit.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      style: {\n        color: 'white'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"Edit Ticket\"), React.createElement(\"div\", {\n      style: {\n        color: 'white'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"/tickets/details/\" + this.props.match.params.id,\n      style: {\n        cursor: 'pointer'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, \"Cancel\"), \" | \", React.createElement(\"a\", {\n      href: \"#\",\n      onClick: this.handleShow,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, \"Delete\")), React.createElement(\"div\", {\n      style: {\n        paddingTop: 20,\n        color: 'white'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"Description\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(Input, {\n      type: \"text\",\n      value: this.state.description,\n      onChange: this.onChangeDescription.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    })), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      style: {\n        paddingTop: 20,\n        color: 'white'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"Assigned To\"), React.createElement(Select, {\n      options: this.state.constUsers,\n      value: {\n        value: this.state.assignedToId,\n        label: this.state.assignedToUsername\n      },\n      onChange: this.handleChangeAssignedTo.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }), React.createElement(\"h5\", {\n      style: {\n        paddingTop: 20,\n        color: 'white'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"Status\"), React.createElement(Select, {\n      options: this.state.statuses,\n      value: {\n        value: this.state.status,\n        label: this.state.status\n      },\n      onChange: this.handleChangeStatus.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    })), React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      style: {\n        paddingTop: 20,\n        color: 'white'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"Type\"), React.createElement(Select, {\n      options: this.state.types,\n      value: {\n        value: this.state.type,\n        label: this.state.type\n      },\n      onChange: this.handleChangeType.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      style: {\n        paddingTop: 20\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(Button, {\n      color: \"primary\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, \"Submit\"))))), React.createElement(Col, {\n      sm: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    })), React.createElement(Modal, {\n      isOpen: this.state.show,\n      onHide: this.handleShow,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, React.createElement(ModalBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, \"Are you sure you want to delete this ticket?\"), React.createElement(ModalFooter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"secondary\",\n      onClick: this.handleShow,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, \"Cancel\"), React.createElement(Button, {\n      variant: \"danger\",\n      onClick: this.handleDelete,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, \"Delete\"))));\n  }\n\n}","map":{"version":3,"sources":["/Users/michaelhudachek/Desktop/buglogger4/client/src/components/Edit-Ticket.js"],"names":["React","Component","Button","Row","Col","Card","Form","Input","Modal","ModalBody","ModalFooter","Select","axios","EditTicket","state","show","constUsers","assignedToId","assignedToUsername","status","type","description","projectId","ticketId","props","match","params","id","statuses","value","label","types","handleShow","console","log","setState","handleDelete","project","ticket","post","then","response","delete","window","location","onChangeDescription","e","target","handleChangeAssignedTo","changedVal","handleChangeStatus","handleChangeType","handleSubmit","preventDefault","res","componentDidMount","get","data","ids","newUsers","map","currentuser","push","_id","username","catch","error","render","background","border","padding","bind","color","cursor","paddingTop"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Button, Row, Col, Card, Form, Input, Modal, ModalBody, ModalFooter } from 'reactstrap';\nimport Select from 'react-select';\nimport axios from 'axios';\n\nexport default class EditTicket extends Component {\n  state = {\n      show: false,\n      constUsers: [],\n      assignedToId: {},\n      assignedToUsername: \"\",\n      status: \"\",\n      type: \"\",\n      description: \"\",\n      projectId: '',\n      ticketId: this.props.match.params.id,\n      statuses: [{ value: \"Open\" , label: \"Open\"},\n                 { value: \"In Progress\" , label: \"In Progress\"},\n                 { value: \"Closed\" , label: \"Closed\"}],\n      types: [{ value: \"Aesthic\" , label: \"Aesthic\"},\n                 { value: \"Bug\" , label: \"Bug\"},\n                 { value: \"Feature\" , label: \"Feature\"}],\n  }\n  \n  componentDidMount() {\n    //get ticket info\n    axios.get('/api/tickets/'+this.props.match.params.id)\n    .then(response => {\n      this.setState({status: response.data.status})\n      this.setState({assignedToId: response.data.assignedToId})\n      this.setState({assignedToUsername: response.data.assignedToUsername})\n      this.setState({type: response.data.type})\n      this.setState({description: response.data.description})\n      this.setState({projectId: response.data.project})\n\n      //get users for drop down selection\n      axios.get('/api/projects/getusers/'+response.data.project)\n      .then(response => {\n        axios.get('/api/users/searchid',{params: {ids: response.data}} )\n        .then(response => {\n          var newUsers = []\n          response.data.map(currentuser => {\n            newUsers.push({ value: currentuser._id , label: currentuser.username})\n          })\n          this.setState({constUsers: newUsers})\n        })\n      })\n    })\n    .catch(function (error) {\n      console.log(error);\n    })\n  }\n\n  handleShow = () => {\n    console.log('handle show')\n    this.setState({show: !this.state.show})\n  }\n\n  //delete ticket, remove ticket from project, remove tickets from userId\n  handleDelete = () => {\n    const project = {ticket: this.state.ticketId}\n    axios.post('/api/projects/removeticket/'+this.state.projectId, project)\n    .then(response => {\n      axios.delete('/api/tickets/'+this.state.ticketId)\n    })\n    .then(response => {\n      window.location = '/tickets'\n    })\n  }\n\n  onChangeDescription = (e) => {\n    this.setState({description: e.target.value})\n  }\n\n  handleChangeAssignedTo = (changedVal) => {\n    this.setState({assignedToId: changedVal.value})\n    this.setState({assignedToUsername: changedVal.label})\n  }\n\n  handleChangeStatus = (changedVal) => {\n    this.setState({status: changedVal.value})\n  }\n\n  handleChangeType = (changedVal) => {\n    this.setState({type: changedVal.value})\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    var ticket = {\n      description: this.state.description,\n      status: this.state.status,\n      type: this.state.type,\n      assignedToId: this.state.assignedToId,\n      assignedToUsername: this.state.assignedToUsername,\n    }\n\n    axios.post('/api/tickets/update/'+this.state.ticketId, ticket)\n    .then(res => window.location = '/tickets/details/'+this.state.ticketId);\n  }\n\n  render() {\n    return (\n      <div>\n        <Row>\n        <Col sm={3}></Col>\n        <Col>\n        <Card style={{background: 'linear-gradient(to right bottom, #888888, #cccccc)', border: 0,padding: 15}}>\n        <Form onSubmit={this.handleSubmit.bind(this)}>\n          <h3 style={{color: 'white'}}>Edit Ticket</h3>\n          <div style={{color: 'white'}}><a href={\"/tickets/details/\"+this.props.match.params.id} style={{cursor: 'pointer'}}>Cancel</a> | <a href={\"#\"} onClick={this.handleShow}>Delete</a></div>\n            <div style={{paddingTop:20, color: 'white'}}><h5>Description</h5></div>\n            <div>\n              <Input type=\"text\" value={ this.state.description } onChange={this.onChangeDescription.bind(this)}/>\n            </div>\n            <Row>\n              <Col>\n                <h5 style={{paddingTop:20, color: 'white'}}>Assigned To</h5>\n                <Select options={this.state.constUsers} value={{ value: this.state.assignedToId, label: this.state.assignedToUsername }} onChange={this.handleChangeAssignedTo.bind(this)}/>\n                <h5 style={{paddingTop:20, color: 'white'}}>Status</h5>\n                <Select options={this.state.statuses} value={{ value: this.state.status, label: this.state.status }} onChange={this.handleChangeStatus.bind(this)}/>\n              </Col>\n              <Col>\n                <h5 style={{paddingTop:20, color: 'white'}}>Type</h5>\n                <Select options={this.state.types} value={{ value: this.state.type, label: this.state.type }} onChange={this.handleChangeType.bind(this)}/>\n              </Col>\n            </Row>\n          <div style={{paddingTop:20}}>\n          <Button color=\"primary\" type=\"submit\">\n            Submit\n          </Button>\n          </div>\n        </Form>\n        </Card>\n        </Col>\n        <Col sm={3}></Col>\n\n        </Row>\n        <Modal isOpen={this.state.show} onHide={this.handleShow}>\n        <ModalBody>Are you sure you want to delete this ticket?</ModalBody>\n        <ModalFooter>\n          <Button variant=\"secondary\" onClick={this.handleShow}>\n            Cancel\n          </Button>\n          <Button variant=\"danger\" onClick={this.handleDelete}>\n            Delete\n          </Button>\n        </ModalFooter>\n      </Modal>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}
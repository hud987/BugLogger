{"ast":null,"code":"import _slicedToArray from \"/Users/michaelhudachek/Desktop/buglogger4/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/michaelhudachek/Desktop/buglogger4/client/src/components/Create-Ticket.js\";\nimport React, { Component, useState, useEffect } from 'react';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport axios from 'axios';\nimport Select from 'react-select';\nimport { Row, Col, Form, Button, Card } from 'react-bootstrap';\nimport \"react-bootstrap-table-next/dist/react-bootstrap-table2.min.css\";\nimport { useAuth0 } from \"../react-auth0-spa\";\nexport default function CreateTicket() {\n  const _useAuth = useAuth0(),\n        loading = _useAuth.loading,\n        user = _useAuth.user;\n\n  const projectId = window.location.pathname.split('/')[3];\n\n  const _useState = useState({}),\n        _useState2 = _slicedToArray(_useState, 2),\n        assignedToId = _useState2[0],\n        setAssignedToId = _useState2[1];\n\n  const _useState3 = useState(\"\"),\n        _useState4 = _slicedToArray(_useState3, 2),\n        assignedToUsername = _useState4[0],\n        setAssignedToUsername = _useState4[1];\n\n  const _useState5 = useState([]),\n        _useState6 = _slicedToArray(_useState5, 2),\n        constUsers = _useState6[0],\n        setConstUsers = _useState6[1];\n\n  const _useState7 = useState(\"\"),\n        _useState8 = _slicedToArray(_useState7, 2),\n        description = _useState8[0],\n        setDescription = _useState8[1];\n\n  const _useState9 = useState(\"\"),\n        _useState10 = _slicedToArray(_useState9, 2),\n        projectTitle = _useState10[0],\n        setProjectTitle = _useState10[1];\n\n  const _useState11 = useState(\"\"),\n        _useState12 = _slicedToArray(_useState11, 2),\n        role = _useState12[0],\n        setRole = _useState12[1];\n\n  const _useState13 = useState(\"\"),\n        _useState14 = _slicedToArray(_useState13, 2),\n        type = _useState14[0],\n        setType = _useState14[1];\n\n  const _useState15 = useState([{\n    value: \"Bug\",\n    label: \"Bug\"\n  }, {\n    value: \"Aesthic\",\n    label: \"Aesthic\"\n  }, {\n    value: \"Feature\",\n    label: \"Feature\"\n  }]),\n        _useState16 = _slicedToArray(_useState15, 2),\n        types = _useState16[0],\n        setTypes = _useState16[1];\n\n  useEffect(() => {\n    axios.get('http://localhost:5000/api/projects/' + projectId).then(response => {\n      setProjectTitle(response.data.title);\n    }).catch(function (error) {\n      console.log(error);\n    }); //get users for drop down selection\n\n    axios.get('http://localhost:5000/api/projects/getusers/' + projectId).then(response => {\n      axios.get('http://localhost:5000/api/users/searchid', {\n        params: {\n          ids: response.data\n        }\n      }).then(response => {\n        console.log(response.data);\n        const newUsers = [];\n        response.data.map(currentuser => {\n          newUsers.push({\n            value: currentuser._id,\n            label: currentuser.username\n          });\n        });\n        setConstUsers(newUsers);\n      });\n    });\n  }, []);\n\n  const onChangeDescription = e => {\n    setDescription(e.target.value);\n  };\n\n  const handleChangeUser = changedVal => {\n    setAssignedToId(changedVal.value);\n    setAssignedToUsername(changedVal.label);\n  };\n\n  const handleChangeType = changedVal => {\n    setType(changedVal.value);\n  };\n\n  const onSubmit = e => {\n    e.preventDefault();\n    var ticket = {\n      newId: {},\n      description: description,\n      type: type,\n      assignedToId: assignedToId,\n      assignedToUsername: assignedToUsername,\n      project: projectId,\n      projectTitle: projectTitle,\n      submitter: user.name\n    };\n    console.log('adding ticket');\n    axios.post('http://localhost:5000/api/tickets/add', ticket).then(res => {\n      console.log('adding ticket to project');\n      axios.post('http://localhost:5000/api/projects/addticket/' + projectId, res.data);\n    }).then(res => {\n      window.location = '/projects/details/' + projectId;\n    });\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(Col, {\n    sm: 3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }), React.createElement(Col, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, React.createElement(Card, {\n    style: {\n      background: 'linear-gradient(to right bottom, #888888, #cccccc)',\n      border: 0,\n      padding: 15 //overflowY: \"scroll\"\n\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    style: {\n      color: 'white'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, \"Add Ticket\"), React.createElement(Form, {\n    onSubmit: onSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    style: {\n      flexDirection: 'row'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    style: {\n      color: 'white'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, \"Description: \"), React.createElement(Form.Control, {\n    type: \"text\",\n    required: true,\n    value: description,\n    onChange: onChangeDescription,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    style: {\n      color: 'white'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, \"Assign To: \"), React.createElement(Select, {\n    defaultValue: constUsers[0],\n    options: constUsers,\n    onChange: handleChangeUser,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    style: {\n      color: 'white'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, \"Type: \"), React.createElement(Select, {\n    options: types,\n    onChange: handleChangeType,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"form-group\",\n    style: {\n      paddingTop: 30\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, React.createElement(Button, {\n    type: \"submit\",\n    style: {\n      fontWeight: 'bold'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, \"Submit Ticket\")))))), React.createElement(Col, {\n    sm: 3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  })));\n}","map":{"version":3,"sources":["/Users/michaelhudachek/Desktop/buglogger4/client/src/components/Create-Ticket.js"],"names":["React","Component","useState","useEffect","axios","Select","Row","Col","Form","Button","Card","useAuth0","CreateTicket","loading","user","projectId","window","location","pathname","split","assignedToId","setAssignedToId","assignedToUsername","setAssignedToUsername","constUsers","setConstUsers","description","setDescription","projectTitle","setProjectTitle","role","setRole","type","setType","value","label","types","setTypes","get","then","response","data","title","catch","error","console","log","params","ids","newUsers","map","currentuser","push","_id","username","onChangeDescription","e","target","handleChangeUser","changedVal","handleChangeType","onSubmit","preventDefault","ticket","newId","project","submitter","name","post","res","background","border","padding","color","flexDirection","paddingTop","fontWeight"],"mappings":"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","sourcesContent":["import React, { Component, useState, useEffect } from 'react';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport axios from 'axios';\nimport Select from 'react-select'\nimport { Row, Col, Form, Button, Card } from 'react-bootstrap';\nimport \"react-bootstrap-table-next/dist/react-bootstrap-table2.min.css\"\nimport { useAuth0 } from \"../react-auth0-spa\";\n\nexport default function CreateTicket() {\n  const { loading, user } = useAuth0();\n  const projectId = window.location.pathname.split('/')[3]\n\n  const [assignedToId, setAssignedToId] = useState({});\n  const [assignedToUsername, setAssignedToUsername] = useState(\"\");\n  const [constUsers, setConstUsers] = useState([]);\n  const [description, setDescription] = useState(\"\");\n  const [projectTitle, setProjectTitle] = useState(\"\");\n  const [role, setRole] = useState(\"\");\n  const [type, setType] = useState(\"\");\n  const [types, setTypes] = useState([{ value: \"Bug\" , label: \"Bug\"},\n                                      { value: \"Aesthic\" , label: \"Aesthic\"},\n                                      { value: \"Feature\" , label: \"Feature\"}]);\n\n  useEffect(() => {\n    axios.get('http://localhost:5000/api/projects/'+projectId)\n    .then(response => {\n      setProjectTitle(response.data.title)\n    })\n    .catch(function (error) {\n      console.log(error);\n    })\n\n    //get users for drop down selection\n    axios.get('http://localhost:5000/api/projects/getusers/'+projectId)\n    .then(response => {\n      axios.get('http://localhost:5000/api/users/searchid',{params: {ids: response.data}} )\n      .then(response => {\n        console.log(response.data)\n        const newUsers = []\n        response.data.map(currentuser => {\n          newUsers.push({ value: currentuser._id , label: currentuser.username})\n        })\n        setConstUsers(newUsers)\n      })\n    })\n    \n  }, []);\n\n  const onChangeDescription = (e) => {\n    setDescription(e.target.value)\n  }\n\n  const handleChangeUser = (changedVal) => {\n    setAssignedToId(changedVal.value)\n    setAssignedToUsername(changedVal.label)\n  }\n\n  const handleChangeType = (changedVal) => {\n    setType(changedVal.value)\n  }\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n\n    var ticket = {\n      newId: {},\n      description: description,\n      type: type,\n      assignedToId: assignedToId,\n      assignedToUsername: assignedToUsername,\n      project: projectId,\n      projectTitle: projectTitle,\n      submitter: user.name\n    }\n\n    console.log('adding ticket')\n    axios.post('http://localhost:5000/api/tickets/add',ticket)\n    .then(res => {\n      console.log('adding ticket to project')\n      axios.post('http://localhost:5000/api/projects/addticket/'+projectId, res.data)\n    })\n    .then(res => {\n      window.location = '/projects/details/'+projectId\n    });\n  }\n\n  return (\n    <div>\n      <Row>\n        <Col sm={3}></Col>\n        <Col>\n        <Card style={{\n          background: 'linear-gradient(to right bottom, #888888, #cccccc)', border: 0,padding: 15, //overflowY: \"scroll\"\n        }}>\n        <h3 style={{color: 'white'}}>Add Ticket</h3>\n        <Form onSubmit={onSubmit}>\n          <div style={{flexDirection: 'row'}}>\n            <label style={{color: 'white'}}>Description: </label>\n              <Form.Control \n                type=\"text\"\n                required\n                value={description}\n                onChange={onChangeDescription}\n              />\n            <label style={{color: 'white'}}>Assign To: </label>\n              <Select defaultValue={constUsers[0]} options={constUsers} onChange={handleChangeUser}/>\n            <label style={{color: 'white'}}>Type: </label>\n              <Select options={types} onChange={handleChangeType}/>\n            <div className=\"form-group\" style={{paddingTop:30}}>\n              <Button type=\"submit\" style={{fontWeight: 'bold'}}>\n                Submit Ticket\n              </Button>\n            </div>\n          </div>  \n        </Form>\n        </Card>\n        </Col>\n        <Col sm={3}></Col>\n      </Row>\n    </div>\n  )\n}"]},"metadata":{},"sourceType":"module"}
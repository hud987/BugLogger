{"ast":null,"code":"var _jsxFileName = \"/Users/michaelhudachek/Desktop/buglogger4/client/src/components/Edit-Ticket.js\";\nimport React, { Component } from 'react';\nimport { Button, Row, Col, Card, Form, Modal, Input } from 'reactstrap';\nimport Select from 'react-select';\nimport axios from 'axios';\nexport default class EditTicket extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      show: false,\n      constUsers: [],\n      assignedToId: {},\n      assignedToUsername: \"\",\n      status: \"\",\n      type: \"\",\n      description: \"\",\n      projectId: '',\n      ticketId: this.props.match.params.id,\n      statuses: [{\n        value: \"Open\",\n        label: \"Open\"\n      }, {\n        value: \"In Progress\",\n        label: \"In Progress\"\n      }, {\n        value: \"Closed\",\n        label: \"Closed\"\n      }],\n      types: [{\n        value: \"Aesthic\",\n        label: \"Aesthic\"\n      }, {\n        value: \"Bug\",\n        label: \"Bug\"\n      }, {\n        value: \"Feature\",\n        label: \"Feature\"\n      }]\n    };\n\n    this.handleDelete = () => {\n      const project = {\n        ticket: this.state.ticketId\n      };\n      axios.post('/api/projects/removeticket/' + this.state.projectId, project).then(response => {\n        axios.delete('/api/tickets/' + this.state.ticketId);\n      }).then(response => {\n        window.location = '/tickets';\n      });\n    };\n\n    this.onChangeDescription = e => {\n      this.setState({\n        description: e.target.value\n      });\n    };\n\n    this.handleChangeAssignedTo = changedVal => {\n      this.setState({\n        assignedToId: changedVal.value\n      });\n      this.setState({\n        assignedToUsername: changedVal.label\n      });\n    };\n\n    this.handleChangeStatus = changedVal => {\n      this.setState({\n        status: changedVal.value\n      });\n    };\n\n    this.handleChangeType = changedVal => {\n      this.setState({\n        type: changedVal.value\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      var ticket = {\n        description: this.state.description,\n        status: this.state.status,\n        type: this.state.type,\n        assignedToId: this.state.assignedToId,\n        assignedToUsername: this.state.assignedToUsername\n      };\n      axios.post('/api/tickets/update/' + this.state.ticketId, ticket).then(res => window.location = '/tickets/details/' + this.state.ticketId);\n    };\n  }\n\n  componentDidMount() {\n    //get ticket info\n    axios.get('/api/tickets/' + this.props.match.params.id).then(response => {\n      this.setState({\n        status: response.data.status\n      });\n      this.setState({\n        assignedToId: response.data.assignedToId\n      });\n      this.setState({\n        assignedToUsername: response.data.assignedToUsername\n      });\n      this.setState({\n        type: response.data.type\n      });\n      this.setState({\n        description: response.data.description\n      });\n      this.setState({\n        projectId: response.data.project\n      }); //get users for drop down selection\n\n      axios.get('/api/projects/getusers/' + response.data.project).then(response => {\n        axios.get('/api/users/searchid', {\n          params: {\n            ids: response.data\n          }\n        }).then(response => {\n          var newUsers = [];\n          response.data.map(currentuser => {\n            newUsers.push({\n              value: currentuser._id,\n              label: currentuser.username\n            });\n          });\n          this.setState({\n            constUsers: newUsers\n          });\n        });\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  handleShow() {\n    this.setState({\n      show: !this.state.show\n    });\n  } //delete ticket, remove ticket from project, remove tickets from userId\n\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(Col, {\n      sm: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }), React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(Card, {\n      style: {\n        background: 'linear-gradient(to right bottom, #888888, #cccccc)',\n        border: 0,\n        padding: 15\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(Form, {\n      onSubmit: this.handleSubmit.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      style: {\n        color: 'white'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, \"Edit Ticket\"), React.createElement(\"div\", {\n      style: {\n        color: 'white'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"/tickets/details/\" + this.props.match.params.id,\n      style: {\n        cursor: 'pointer'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"Cancel\"), \" | \", React.createElement(\"a\", {\n      href: \"#\",\n      onClick: this.handleShow(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"Delete\")), React.createElement(\"div\", {\n      style: {\n        paddingTop: 20,\n        color: 'white'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, \"Description\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(Input, {\n      type: \"text\",\n      value: this.state.description,\n      onChange: this.onChangeDescription.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    })), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      style: {\n        paddingTop: 20,\n        color: 'white'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"Assigned To\"), React.createElement(Select, {\n      options: this.state.constUsers,\n      value: {\n        value: this.state.assignedToId,\n        label: this.state.assignedToUsername\n      },\n      onChange: this.handleChangeAssignedTo.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }), React.createElement(\"h5\", {\n      style: {\n        paddingTop: 20,\n        color: 'white'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"Status\"), React.createElement(Select, {\n      options: this.state.statuses,\n      value: {\n        value: this.state.status,\n        label: this.state.status\n      },\n      onChange: this.handleChangeStatus.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    })), React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      style: {\n        paddingTop: 20,\n        color: 'white'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"Type\"), React.createElement(Select, {\n      options: this.state.types,\n      value: {\n        value: this.state.type,\n        label: this.state.type\n      },\n      onChange: this.handleChangeType.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      style: {\n        paddingTop: 20\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"primary\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"Submit\"))))), React.createElement(Col, {\n      sm: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    })), React.createElement(Modal, {\n      show: this.state.show,\n      onHide: this.handleShow(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(Modal.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, \"Are you sure you want to delete this ticket?\"), React.createElement(Modal.Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"secondary\",\n      onClick: this.handleShow(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, \"Cancel\"), React.createElement(Button, {\n      variant: \"danger\",\n      onClick: this.handleDelete(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, \"Delete\"))));\n  }\n\n}","map":{"version":3,"sources":["/Users/michaelhudachek/Desktop/buglogger4/client/src/components/Edit-Ticket.js"],"names":["React","Component","Button","Row","Col","Card","Form","Modal","Input","Select","axios","EditTicket","state","show","constUsers","assignedToId","assignedToUsername","status","type","description","projectId","ticketId","props","match","params","id","statuses","value","label","types","handleDelete","project","ticket","post","then","response","delete","window","location","onChangeDescription","e","setState","target","handleChangeAssignedTo","changedVal","handleChangeStatus","handleChangeType","handleSubmit","preventDefault","res","componentDidMount","get","data","ids","newUsers","map","currentuser","push","_id","username","catch","error","console","log","handleShow","render","background","border","padding","bind","color","cursor","paddingTop"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Button, Row, Col, Card, Form, Modal, Input } from 'reactstrap';\nimport Select from 'react-select';\nimport axios from 'axios';\n\nexport default class EditTicket extends Component {\n  state = {\n      show: false,\n      constUsers: [],\n      assignedToId: {},\n      assignedToUsername: \"\",\n      status: \"\",\n      type: \"\",\n      description: \"\",\n      projectId: '',\n      ticketId: this.props.match.params.id,\n      statuses: [{ value: \"Open\" , label: \"Open\"},\n                 { value: \"In Progress\" , label: \"In Progress\"},\n                 { value: \"Closed\" , label: \"Closed\"}],\n      types: [{ value: \"Aesthic\" , label: \"Aesthic\"},\n                 { value: \"Bug\" , label: \"Bug\"},\n                 { value: \"Feature\" , label: \"Feature\"}],\n  }\n  \n  componentDidMount() {\n    //get ticket info\n    axios.get('/api/tickets/'+this.props.match.params.id)\n    .then(response => {\n      this.setState({status: response.data.status})\n      this.setState({assignedToId: response.data.assignedToId})\n      this.setState({assignedToUsername: response.data.assignedToUsername})\n      this.setState({type: response.data.type})\n      this.setState({description: response.data.description})\n      this.setState({projectId: response.data.project})\n\n      //get users for drop down selection\n      axios.get('/api/projects/getusers/'+response.data.project)\n      .then(response => {\n        axios.get('/api/users/searchid',{params: {ids: response.data}} )\n        .then(response => {\n          var newUsers = []\n          response.data.map(currentuser => {\n            newUsers.push({ value: currentuser._id , label: currentuser.username})\n          })\n          this.setState({constUsers: newUsers})\n        })\n      })\n    })\n    .catch(function (error) {\n      console.log(error);\n    })\n  }\n\n  handleShow() {\n    this.setState({show: !this.state.show})\n  }\n\n  //delete ticket, remove ticket from project, remove tickets from userId\n  handleDelete = () => {\n    const project = {ticket: this.state.ticketId}\n    axios.post('/api/projects/removeticket/'+this.state.projectId, project)\n    .then(response => {\n      axios.delete('/api/tickets/'+this.state.ticketId)\n    })\n    .then(response => {\n      window.location = '/tickets'\n    })\n  }\n\n  onChangeDescription = (e) => {\n    this.setState({description: e.target.value})\n  }\n\n  handleChangeAssignedTo = (changedVal) => {\n    this.setState({assignedToId: changedVal.value})\n    this.setState({assignedToUsername: changedVal.label})\n  }\n\n  handleChangeStatus = (changedVal) => {\n    this.setState({status: changedVal.value})\n  }\n\n  handleChangeType = (changedVal) => {\n    this.setState({type: changedVal.value})\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    var ticket = {\n      description: this.state.description,\n      status: this.state.status,\n      type: this.state.type,\n      assignedToId: this.state.assignedToId,\n      assignedToUsername: this.state.assignedToUsername,\n    }\n\n    axios.post('/api/tickets/update/'+this.state.ticketId, ticket)\n    .then(res => window.location = '/tickets/details/'+this.state.ticketId);\n  }\n\n  render() {\n    return (\n      <div>\n        <Row>\n        <Col sm={3}></Col>\n        <Col>\n        <Card style={{background: 'linear-gradient(to right bottom, #888888, #cccccc)', border: 0,padding: 15}}>\n        <Form onSubmit={this.handleSubmit.bind(this)}>\n          <h3 style={{color: 'white'}}>Edit Ticket</h3>\n          <div style={{color: 'white'}}><a href={\"/tickets/details/\"+this.props.match.params.id} style={{cursor: 'pointer'}}>Cancel</a> | <a href={\"#\"} onClick={this.handleShow(this)}>Delete</a></div>\n            <div style={{paddingTop:20, color: 'white'}}><h5>Description</h5></div>\n            <div>\n              <Input type=\"text\" value={ this.state.description } onChange={this.onChangeDescription.bind(this)}/>\n            </div>\n            <Row>\n              <Col>\n                <h5 style={{paddingTop:20, color: 'white'}}>Assigned To</h5>\n                <Select options={this.state.constUsers} value={{ value: this.state.assignedToId, label: this.state.assignedToUsername }} onChange={this.handleChangeAssignedTo.bind(this)}/>\n                <h5 style={{paddingTop:20, color: 'white'}}>Status</h5>\n                <Select options={this.state.statuses} value={{ value: this.state.status, label: this.state.status }} onChange={this.handleChangeStatus.bind(this)}/>\n              </Col>\n              <Col>\n                <h5 style={{paddingTop:20, color: 'white'}}>Type</h5>\n                <Select options={this.state.types} value={{ value: this.state.type, label: this.state.type }} onChange={this.handleChangeType.bind(this)}/>\n              </Col>\n            </Row>\n          <div style={{paddingTop:20}}>\n          <Button variant=\"primary\" type=\"submit\">\n            Submit\n          </Button>\n          </div>\n        </Form>\n        </Card>\n        </Col>\n        <Col sm={3}></Col>\n\n        </Row>\n        <Modal show={this.state.show} onHide={this.handleShow(this)}>\n        <Modal.Body>Are you sure you want to delete this ticket?</Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={this.handleShow(this)}>\n            Cancel\n          </Button>\n          <Button variant=\"danger\" onClick={this.handleDelete(this)}>\n            Delete\n          </Button>\n        </Modal.Footer>\n      </Modal>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}